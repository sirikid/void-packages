# Template file for 'emacs-next'
pkgname=emacs-next
version=28.0.50
revision=1
wrksrc=emacs-dist
build_style=gnu-configure
configure_args="
 --with-cairo
 --with-file-notification=inotify
 --with-modules
 --with-pgtk-toolkit=gtk4
 --without-x
 $(vopt_with gif)
 $(vopt_with gnutls)
 $(vopt_with imagemagick)
 $(vopt_with jpeg)
 $(vopt_with m17n m17n-flt)
 $(vopt_with png)
 $(vopt_with sound)
 $(vopt_with svg rsvg)
 $(vopt_with tiff)
 $(vopt_with xml xml2)
 $(vopt_with xpm)
"
hostmakedepends="pkg-config tar autoconf automake texinfo"
makedepends="
 acl-devel
 dbus-devel
 gtk4-devel
 ncurses-devel
 webkit2gtk-devel
 $(vopt_if gif giflib-devel)
 $(vopt_if gnutls gnutls-devel)
 $(vopt_if imagemagick libmagick-devel)
 $(vopt_if jpeg libjpeg-turbo-devel)
 $(vopt_if m17n m17n-lib-devel)
 $(vopt_if png libpng-devel)
 $(vopt_if sound alsa-lib-devel)
 $(vopt_if svg librsvg-devel)
 $(vopt_if tiff tiff-devel)
 $(vopt_if xml libxml2-devel)
 $(vopt_if xpm libXpm-devel)
"
# depends="emacs-common-${version}_${revision}"
short_desc="GNU Emacs editor"
maintainer="a a <a@a.a>"
license="GPL-3.0-or-later"
homepage="http://www.gnu.org/software/emacs/"
distfiles="http://localhost/emacs-dist.tar.lz"
checksum=78ef8b453bcd0fccf63d94a8c6fe5bdb8ec02a680719a7d67d6514dc7b0bdbbb
replaces="emacs>=0"
nocross=yes
nopie=yes

# Package build options
build_options="jpeg tiff gif png xpm svg xml imagemagick gnutls sound m17n"
desc_option_xpm="Enable support for XPM images"
desc_option_sound="Enable support for sound"
desc_option_m17n="Enable support for m17n multilingual text processing"
build_options_default="jpeg tiff gif png xpm svg xml imagemagick gnutls sound m17n"

pre_configure() {
	autoreconf -i -f .
}
