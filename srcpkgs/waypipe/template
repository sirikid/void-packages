# Template file for 'waypipe'
pkgname=waypipe
version=0.6.1
revision=1
wrksrc="waypipe-v${version}"
build_style=meson
configure_args="-Dc_args='-Wno-error=unused-result'"
hostmakedepends="pkg-config scdoc wayland-devel"
makedepends="MesaLib-devel ffmpeg-devel liblz4-devel libva-devel libzstd-devel systemtap-devel wayland-protocols"
depends="openssh"
short_desc="Network transparency with Wayland"
maintainer="Ivan Sokolov <ivan-p-sokolov@ya.ru>"
license="MIT"
homepage="https://gitlab.freedesktop.org/mstoeckl/waypipe"
distfiles="https://gitlab.freedesktop.org/mstoeckl/waypipe/-/archive/v${version}/waypipe-v${version}.tar.gz"
checksum=95114f0f4e52cbd8d054c3119265d9006c9f39550961dea58f72b984075d7bce

case $XBPS_TARGET_MACHINE in
	(armv7l*)
		configure_args+=" -Dc_args='-mfpu=neon'" ;;
esac

post_install() {
	vlicense COPYING LICENSE
}
